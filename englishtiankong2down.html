<!DOCTYPE html>
<html>
<head>
    <title>éƒ¨ç¼–ç‰ˆäºŒå¹´çº§è‹±è¯­ä¸‹å†Œå•å…ƒç»ƒä¹ </title>
    <style>
        body { 
            font-family: "å¹¼åœ†", Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #d4edce, #fff);
        }
        .header {
            text-align: center;
            margin: 30px 0;
        }
        .word-container {
            display: flex;
            gap: 8px;
            font-size: 28px;
            justify-content: center;
            margin: 30px 0;
        }
        .letter-input {
            width: 40px;
            height: 40px;
            text-align: center;
            font-size: 20px;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            background: #f0f8e9;
            transition: 0.3s;
        }
        .letter-input.error {
            border-color: #ff4444;
            animation: shake 0.5s;
        }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            50% { transform: translateX(3px); }
            75% { transform: translateX(-3px); }
            100% { transform: translateX(0); }
        }
        .chinese-meaning {
            font-size: 18px;
            color: #333;
            margin: 15px 0;
            text-align: center;
        }
        button {
            background: #4CAF50;
            color: white;
            padding: 10px 25px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        .feedback {
            color: #ff4444;
            text-align: center;
            margin: 15px;
        }
        .result-box {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“– éƒ¨ç¼–ç‰ˆäºŒå¹´çº§è‹±è¯­ä¸‹å†Œç»ƒä¹  ğŸ“–</h1>
    </div>
    
    <div class="container">
        <label>é€‰æ‹©å•å…ƒï¼š</label>
        <select id="unitSelect">
            <option value="0">Unit 1 My Family</option>
            <option value="1">Unit 2 Animals</option>
            <option value="2">Unit 3 Food</option>
            <option value="3">Unit 4 Toys</option>
            <option value="4">Unit 5 Colors</option>
            <option value="5">Unit 6 Numbers</option>
        </select>
        <button onclick="startPractice()">å¼€å§‹ç»ƒä¹ </button>
    </div>

    <div id="practiceArea" style="display:none">
        <div class="word-container" id="wordContainer"></div>
        <div class="chinese-meaning" id="chineseMeaning"></div>
        <div class="button-group">
            <button onclick="checkAnswer()" id="submitButton">æäº¤ç­”æ¡ˆ</button>
            <button onclick="nextWord()" id="nextButton" class="disabled" disabled>ä¸‹ä¸€ä¸ª</button>
        </div>
        <div id="feedback" class="feedback"></div>
    </div>

    <div id="finalResult" class="result-box" style="display:none">
        <h3>ç»ƒä¹ ç»“æœ</h3>
        <p>âœ… æ­£ç¡®ï¼š<span id="correctCount"></span></p>
        <p>âŒ é”™è¯¯ï¼š<span id="wrongCount"></span></p>
        <div id="errorWordsSection">
            <h4>éœ€è¦åŠ å¼ºçš„å•è¯ï¼š</h4>
            <ul id="errorWordsList"></ul>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {});

// å•å…ƒæ•°æ®ï¼ˆäºŒå¹´çº§ä¸‹å†Œå•è¯è¡¨ï¼‰
const unitData = [ 
    // Unit 1 My Family
    [["father", "çˆ¸çˆ¸"], ["mother", "å¦ˆå¦ˆ"], ["brother", "å“¥å“¥/å¼Ÿå¼Ÿ"],
     ["sister", "å§å§/å¦¹å¦¹"], ["grandpa", "çˆ·çˆ·"], ["grandma", "å¥¶å¥¶"]],
    // Unit 2 Animals
    [["cat", "çŒ«"], ["dog", "ç‹—"], ["rabbit", "å…”å­"],
     ["bird", "é¸Ÿ"], ["fish", "é±¼"], ["duck", "é¸­å­"]],
    // Unit 3 Food
    [["apple", "è‹¹æœ"], ["banana", "é¦™è•‰"], ["bread", "é¢åŒ…"],
     ["cake", "è›‹ç³•"], ["milk", "ç‰›å¥¶"], ["juice", "æœæ±"]],
    // Unit 4 Toys
    [["ball", "çƒ"], ["doll", "æ´‹å¨ƒå¨ƒ"], ["car", "å°æ±½è½¦"],
     ["plane", "é£æœº"], ["train", "ç«è½¦"], ["boat", "èˆ¹"]],
    // Unit 5 Colors
    [["red", "çº¢è‰²"], ["blue", "è“è‰²"], ["yellow", "é»„è‰²"],
     ["green", "ç»¿è‰²"], ["black", "é»‘è‰²"], ["white", "ç™½è‰²"]],
    // Unit 6 Numbers
    [["one", "ä¸€"], ["two", "äºŒ"], ["three", "ä¸‰"],
     ["four", "å››"], ["five", "äº”"], ["six", "å…­"]]
];

let currentUnit = 0;
let currentWordIndex = 0;
let correctCount = 0;
let wrongCount = 0;
let answerLetters = [];
let errorWords = [];
let attemptCount = 0;

function startPractice() {
    currentUnit = parseInt(document.getElementById('unitSelect').value);
    currentWordIndex = 0;
    correctCount = 0;
    wrongCount = 0;
    errorWords = [];
    attemptCount = 0;
    
    document.getElementById('practiceArea').style.display = 'block';
    document.getElementById('finalResult').style.display = 'none';
    document.getElementById('nextButton').disabled = true;
    document.getElementById('nextButton').classList.add('disabled');
    
    showNextWord();
}

function showNextWord() {
    if (currentWordIndex >= unitData[currentUnit].length) {
        endPractice();
        return;
    }

    const wordInfo = unitData[currentUnit][currentWordIndex];
    const word = wordInfo[0];
    const chinese = wordInfo[1];
    
    const letters = word.split('');
    const maskCount = Math.floor(Math.random() * 3) + 1;
    const maskedPositions = new Set();
    
    while (maskedPositions.size < maskCount && maskedPositions.size < letters.length) {
        maskedPositions.add(Math.floor(Math.random() * letters.length));
    }
    
    const container = document.getElementById('wordContainer');
    container.innerHTML = '';
    answerLetters = [];
    
    letters.forEach((letter, index) => {
        if (maskedPositions.has(index)) {
            const input = document.createElement('input');
            input.className = 'letter-input';
            input.maxLength = 1;
            input.dataset.correct = letter;
            container.appendChild(input);
            answerLetters.push(input);
        } else {
            const span = document.createElement('span');
            span.textContent = letter;
            container.appendChild(span);
        }
    });

    document.getElementById('chineseMeaning').textContent = chinese;
    document.getElementById('feedback').textContent = '';
    answerLetters.forEach(input => input.classList.remove('error'));
    document.getElementById('submitButton').disabled = false;
    document.getElementById('nextButton').disabled = true;
    document.getElementById('nextButton').classList.add('disabled');
    attemptCount = 0;
}

function checkAnswer() {
    const userAnswer = answerLetters.map(input => input.value.toLowerCase());
    const correctAnswer = answerLetters.map(input => input.dataset.correct.toLowerCase());
    
    if (userAnswer.join('') === correctAnswer.join('')) {
        correctCount++;
        currentWordIndex++;
        showNextWord();
    } else {
        attemptCount++;
        answerLetters.forEach(input => {
            if (input.value.toLowerCase() !== input.dataset.correct.toLowerCase()) {
                input.classList.add('error');
            }
        });
        
        if (attemptCount === 1) {
            document.getElementById('feedback').textContent = 'éƒ¨åˆ†å­—æ¯é”™è¯¯ï¼Œè¯·å†è¯•ä¸€æ¬¡ï¼';
            document.getElementById('submitButton').disabled = false;
        } else {
            wrongCount++;
            document.getElementById('feedback').innerHTML = 
                `æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š<span style="color: #4CAF50;">${correctAnswer.join('')}</span>`;
            answerLetters.forEach(input => {
                input.value = input.dataset.correct;
                input.disabled = true;
                input.classList.remove('error');
            });
            document.getElementById('submitButton').disabled = true;
            document.getElementById('nextButton').disabled = false;
            document.getElementById('nextButton').classList.remove('disabled');
            if (!errorWords.includes(unitData[currentUnit][currentWordIndex][0])) {
                errorWords.push(unitData[currentUnit][currentWordIndex][0]);
            }
        }
    }
}

function nextWord() {
    currentWordIndex++;
    showNextWord();
}

function endPractice() {
    document.getElementById('practiceArea').style.display = 'none';
    document.getElementById('finalResult').style.display = 'block';
    
    document.getElementById('correctCount').textContent = correctCount;
    document.getElementById('wrongCount').textContent = wrongCount;
    
    const errorSection = document.getElementById('errorWordsSection');
    const errorList = document.getElementById('errorWordsList');
    errorList.innerHTML = '';
    
    if (errorWords.length > 0) {
        errorSection.style.display = 'block';
        errorWords.forEach(word => {
            const li = document.createElement('li');
            li.textContent = word;
            errorList.appendChild(li);
        });
    } else {
        errorSection.style.display = 'none';
    }
}
</script>
</body>
</html>