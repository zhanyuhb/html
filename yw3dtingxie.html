<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ä¸‰å¹´çº§ä¸‹å†Œç”Ÿå­—å¬å†™ç³»ç»Ÿ</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(120deg, #ffd7ed 0%, #d6f5ff 100%);
            font-family: "Comic Sans MS", "å¹¼åœ†", cursive;
            overflow: hidden;
            position: relative;
        }

        /* æ–°å¢CSSå¡é€šè£…é¥°å…ƒç´  */
        .star {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ffec99;
            border-radius: 50%;
            animation: twinkle 1.5s infinite;
        }
        .star::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffec99;
            border-radius: 50%;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        .star-1 { top: 50px; left: 100px; animation-delay: 0s; }
        .star-2 { top: 150px; right: 100px; animation-delay: 0.5s; }
        .star-3 { bottom: 80px; left: 200px; animation-delay: 1s; }
        .star-4 { bottom: 120px; right: 150px; animation-delay: 1.2s; }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* äº‘æœµè£…é¥° */
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
        }
        .cloud:before, .cloud:after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }
        .cloud-1 {
            width: 150px; height: 50px;
            top: 20px; left: -100px;
            animation: float 8s linear infinite;
        }
        .cloud-1:before {
            width: 80px; height: 80px;
            top: -30px; left: 30px;
        }
        .cloud-1:after {
            width: 100px; height: 100px;
            top: 0; left: 80px;
        }
        .cloud-2 {
            width: 100px; height: 40px;
            bottom: 50px; right: -50px;
            animation: float 6s linear infinite reverse;
        }
        .cloud-2:before {
            width: 60px; height: 60px;
            top: -20px; left: 20px;
        }
        .cloud-2:after {
            width: 70px; height: 70px;
            top: 0; left: 50px;
        }

        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }

        #main {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 40px;
        }

        h1 {
            color: #ff6b6b;
            font-size: 2.5em;
            text-shadow: 2px 2px 0 #ffd384;
            margin-bottom: 30px;
        }

        select {
            padding: 12px 24px;
            font-size: 18px;
            border: 3px solid #4ecdc4;
            border-radius: 25px;
            background: #fff;
            margin: 15px;
            cursor: pointer;
            transition: 0.3s;
        }
        select:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.5);
        }

        #controls {
            margin: 30px 0;
        }

        button {
            padding: 15px 35px;
            font-size: 20px;
            color: white;
            background: linear-gradient(135deg, #45b6fe, #4ecdc4);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(69, 182, 254, 0.4);
            transition: 0.3s;
            margin: 0 10px;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(69, 182, 254, 0.6);
        }

        /* æç¤ºè¯­æ ·å¼ */
        #status {
            font-size: 2em;
            color: #ff4444;
            margin: 40px 0;
            padding: 25px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.9);
            display: block;
            text-shadow: 1px 1px 2px #ffd700;
            border: 3px solid #ff6b6b;
        }

        /* è®¡æ•°å™¨æ ·å¼ */
        .counter-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }
        .counter {
            font-size: 1.3em;
            color: #4ecdc4;
            background: rgba(255, 255, 255, 0.8);
            padding: 12px 25px;
            border-radius: 15px;
            border: 2px dashed #4ecdc4;
            min-width: 150px;
        }

        input[type="number"] {
            width: 80px;
            padding: 10px;
            font-size: 18px;
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- æ–°å¢CSSæ˜Ÿæ˜Ÿè£…é¥° -->
    <div class="star star-1"></div>
    <div class="star star-2"></div>
    <div class="star star-3"></div>
    <div class="star star-4"></div>

    <!-- ä¿ç•™äº‘æœµè£…é¥° -->
    <div class="cloud cloud-1"></div>
    <div class="cloud cloud-2"></div>

    <div id="main">
        <h1>âœ¨ ä¸‰å¹´çº§ä¸‹å†Œç”Ÿå­—å¬å†™ä¹å›­ âœ¨</h1>
        <div>
            <select id="lessonSelect"></select>
        </div>
        <div id="controls">
            <label>é—´éš”æ—¶é—´ï¼š<input type="number" id="interval" value="10" min="5" max="30"> ç§’</label>
            <button onclick="startDictation()">å¼€å§‹å¬å†™ ğŸ¤</button>
            <button onclick="stopDictation()" id="stopBtn" style="display:none">åœæ­¢å¬å†™ ğŸš«</button>
        </div>
        
        <!-- çŠ¶æ€æç¤ºå’Œè®¡æ•°å™¨ -->
        <div id="status">å‡†å¤‡å¼€å§‹å•¦ï¼</div>
        <div class="counter-container">
            <div class="counter" id="totalWords">æ€»ç”Ÿå­—ï¼š0</div>
            <div class="counter" id="remainingWords">å‰©ä½™ï¼š0</div>
        </div>
    </div>

<script>
const dictationData = {
    "ä¸‰ä¸‹_ç¬¬ä¸€å•å…ƒ_å¤è¯—ä¸‰é¦–": ["è", "ç‡•", "é¸³", "é¸¯", "æƒ ", "å´‡", "èŠ¦", "èŠ½", "æ¢…", "æºª", "æ³›", "å‡"],
    "ä¸‰ä¸‹_ç¬¬ä¸€å•å…ƒ_ç‡•å­": ["å‡‘", "æ‹‚", "é›†", "èš", "å½¢", "æ ", "å¶", "å°”", "æ²¾", "å€¦", "é—²", "çº¤", "ç—•"],
    "ä¸‰ä¸‹_ç¬¬ä¸€å•å…ƒ_è·èŠ±": ["ç“£", "è“¬", "èƒ€", "è£‚", "å§¿", "åŠ¿", "ä»¿", "ä½›", "éš", "è¹ˆ", "æ­¢"],
    "ä¸‰ä¸‹_ç¬¬äºŒå•å…ƒ_å®ˆæ ªå¾…å…”": ["å®ˆ", "æ ª", "å¾…", "å®‹", "è€•", "è§¦", "é¢ˆ", "é‡Š", "å…¶"],
    "ä¸‰ä¸‹_ç¬¬äºŒå•å…ƒ_é™¶ç½å’Œé“ç½": ["éª„", "å‚²", "è°¦", "è™š", "æ‡¦", "å¼±", "æ", "å°˜", "è®¶", "æ§", "ä»£", "ä»·"],
    "ä¸‰ä¸‹_ç¬¬äºŒå•å…ƒ_é¹¿è§’å’Œé¹¿è…¿": ["é¹¿", "å¡˜", "æ˜ ", "æ¬£", "èµ", "åŒ€", "è‡´", "é…", "ä¼ ", "å“", "ç‹®", "è¿½", "å¹"],
    "ä¸‰ä¸‹_ç¬¬ä¸‰å•å…ƒ_å¤è¯—ä¸‰é¦–": ["ç¬¦", "æ¬²", "é­‚", "å€Ÿ", "é…’", "ä½•", "ç‰§", "å…„", "ç‹¬", "å¼‚", "ä½³"],
    "ä¸‰ä¸‹_ç¬¬ä¸‰å•å…ƒ_çº¸çš„å‘æ˜": ["ä¼Ÿ", "å½•", "ä¿", "å­˜", "çº¦", "éªŒ", "æ", "é˜¿", "æ¬§", "æ´²", "ç¤¾"],
    "ä¸‰ä¸‹_ç¬¬ä¸‰å•å…ƒ_èµµå·æ¡¥": ["èµµ", "çœ", "å¿", "åŒ ", "è®¾", "è®¡", "å²", "åˆ›", "ä¸¾", "ä¸”", "æ™º", "æ…§", "å†"],
    "ä¸‰ä¸‹_ç¬¬å››å•å…ƒ_èŠ±é’Ÿ": ["èŠ¬", "èŠ³", "å†…", "é†’", "å¯¿", "è‹", "å¼º", "ç¤º", "æ˜†", "ä¿®å»º", "ç»„"],
    "ä¸‰ä¸‹_ç¬¬å››å•å…ƒ_èœœèœ‚": ["èœœ", "èœ‚", "è¾¨", "é˜»", "è·¨", "æ‹¬", "æ£€", "æŸ¥", "ç¡®", "è¯¯", "é€”", "é™Œ"],
    "ä¸‰ä¸‹_ç¬¬å››å•å…ƒ_å°è™¾": ["å®‡", "å®™", "æ·Œ", "ç§˜", "å¯†", "æ ‹", "æ¢¯", "é“ƒ", "ä¹˜", "ç»ª", "ç¯‡", "è¶Š"],
    "ä¸‰ä¸‹_ç¬¬äº”å•å…ƒ_å®‡å®™çš„å¦ä¸€è¾¹": ["çŠ¶", "ç‹", "ç‹¸", "è…°", "é›¶", "å·§", "å…‹", "è‚ ", "ç»§", "ç»­", "æŠ¬", "çƒ¦"],
    "ä¸‰ä¸‹_ç¬¬äº”å•å…ƒ_æˆ‘å˜æˆäº†ä¸€æ£µæ ‘": ["è¡¨", "èƒ†", "ç†", "å¤º", "éª‚", "ä»‡", "å·®", "ä»˜", "å€", "è™½", "é¬¼", "æ³¡", "ä»¶"],
    "ä¸‰ä¸‹_ç¬¬å…­å•å…ƒ_ç«¥å¹´çš„æ°´å¢¨ç”»": ["å¢¨", "æŸ“", "ç«¿", "è…¾", "ç¢", "æ‹¨", "æµª", "è‘«", "èŠ¦", "çˆ½", "è˜‘", "è‡"],
    "ä¸‰ä¸‹_ç¬¬å…­å•å…ƒ_å‰ƒå¤´å¤§å¸ˆ": ["çš‚", "å‰©", "ç¢—", "æ‚ ", "è‹¥", "é€", "å¨‡", "æ‰¯", "ä»°", "ä¸²", "å©´", "å¸Œ"],
    "ä¸‰ä¸‹_ç¬¬å…­å•å…ƒ_è‚¥çš‚æ³¡": ["å‘ˆ", "å¹»", "è¯±", "æ¶¦", "èŠ’", "å†°", "å‰‘", "æ™®", "é€š", "æ¨¡", "å‹"],
    "ä¸‰ä¸‹_ç¬¬ä¸ƒå•å…ƒ_æˆ‘ä»¬å¥‡å¦™çš„ä¸–ç•Œ": ["å®", "å®˜", "æ±ª", "å‚", "æ”»", "æ¨", "è¿…", "é€Ÿ", "é€€", "è½®", "ç…¤", "é“"],
    "ä¸‰ä¸‹_ç¬¬ä¸ƒå•å…ƒ_æµ·åº•ä¸–ç•Œ": ["å¿…", "èƒ¡", "ç¿", "éª‘", "ç§’", "è…¿", "å‡¶", "çŒ›", "æ¥", "åº™", "å¨", "æ­¦", "é•‡"],
    "ä¸‰ä¸‹_ç¬¬ä¸ƒå•å…ƒ_ç«çƒ§äº‘": ["æ€§", "å·", "è´§", "ç®—", "å¤¹", "å¤¸", "åŠ¡", "è¡¬", "è¡«", "è´Ÿ", "è´£", "è‰º"],
    "ä¸‰ä¸‹_ç¬¬å…«å•å…ƒ_æ…¢æ€§å­è£ç¼": ["æ¼", "å–‚", "èƒ–", "é©´", "è´¼", "ç‹¼", "è«", "å‰", "æŠ±", "æ¶", "èƒ¶", "ç²˜", "å"],
    "ä¸‰ä¸‹_ç¬¬å…«å•å…ƒ_æ¼": ["æ¼", "å–‚", "èƒ–", "é©´", "è´¼", "ç‹¼", "è«", "å‰", "æŠ±", "æ¶", "èƒ¶", "ç²˜", "å"],
};

let timer = null;
let isStopped = false;

// åˆå§‹åŒ–è¯¾ç¨‹é€‰æ‹©
(function init() {
    const select = document.getElementById('lessonSelect');
    Object.keys(dictationData).forEach(lesson => {
        const option = document.createElement('option');
        option.value = lesson;
        option.textContent = lesson
            .replace(/_/g, ' ')
            .replace('ä¸‰ä¸‹', 'ğŸŒ¿ ä¸‰å¹´çº§ä¸‹å†Œ ')
            .replace('å•å…ƒ', 'å•å…ƒ ğŸ“š ')
            .replace('è¯¾', 'è¯¾ âœï¸');
        select.appendChild(option);
    });
})();

function startDictation() {
    const lesson = document.getElementById('lessonSelect').value;
    const interval = parseInt(document.getElementById('interval').value) * 1000;
    const words = dictationData[lesson];
    
    if (!words || words.length === 0) {
        alert("Oopsï¼è¿™ä¸ªè¯¾ç¨‹æš‚æ—¶æ²¡æœ‰ç”Ÿå­—å“¦ ğŸ¤”");
        return;
    }

    // æ˜¾ç¤ºè®¡æ•°å™¨
    document.getElementById('totalWords').textContent = `æ€»ç”Ÿå­—ï¼š${words.length}`;
    document.getElementById('remainingWords').textContent = `å‰©ä½™ï¼š${words.length}`;
    document.getElementById('stopBtn').style.display = 'inline-block';

    const synth = window.speechSynthesis;
    const statusDiv = document.getElementById('status');
    
    // æ ¼å¼åŒ–è¯¾é¢˜åç§°
    const formattedLesson = lesson
        .replace(/_/g, ' ')
        .replace('ä¸‰ä¸‹', 'ä¸‰å¹´çº§ä¸‹å†Œ')
        .replace('å•å…ƒ', 'å•å…ƒ')
        .replace('è¯¾', 'è¯¾');

    // å¼€å§‹æç¤ºè¯­
    speak(`å°æœ‹å‹ä»¬è¯·æ³¨æ„å•¦ï¼ç°åœ¨å¼€å§‹å¬å†™ã€Š${formattedLesson}ã€‹çš„ç”Ÿå­—ï¼Œæ€»å…±æœ‰${words.length}ä¸ªç”Ÿå­—ï¼Œå‡†å¤‡å¥½çº¸ç¬”ï¼Œæˆ‘ä»¬é©¬ä¸Šå¼€å§‹ï¼`, 0.8);

    // æ›´æ–°çŠ¶æ€æç¤º
    statusDiv.textContent = "æ­£åœ¨å¬å†™...";
    isStopped = false;
    
    let index = 0;
    function nextWord() {
        if (isStopped || index >= words.length) {
            if (!isStopped) {
                // ç»“æŸæç¤ºè¯­
                speak(`ã€Š${formattedLesson}ã€‹çš„æ‰€æœ‰ç”Ÿå­—å·²ç»å¬å†™å®Œæ¯•ï¼å¤§å®¶è¾›è‹¦å•¦ï¼`, 0.8);
                statusDiv.textContent = "å¬å†™ç»“æŸå•¦ï¼";
            }
            document.getElementById('stopBtn').style.display = 'none';
            return;
        }
        
        const word = words[index];
        
        // æ›´æ–°å‰©ä½™è®¡æ•°
        document.getElementById('remainingWords').textContent = `å‰©ä½™ï¼š${words.length - index}`;
        
        // ç›´æ¥å¼€å§‹æœ—è¯»ï¼ˆç§»é™¤â€œå®â€å£°ç›¸å…³ä»£ç ï¼‰
        // æœ—è¯»ä¸¤éï¼ˆ0.6å€é€Ÿï¼Œé—´éš”5ç§’ï¼‰
        speak(word, 0.6); // ç¬¬ä¸€éæœ—è¯»
        setTimeout(() => {
            speak(word, 0.6); // ç¬¬äºŒéæœ—è¯»
        }, 3000); // é—´éš”5ç§’
        
        index++;
        timer = setTimeout(nextWord, interval + 10000); // ä¸¤éæœ—è¯»ï¼ˆ10ç§’ï¼‰ + ç”¨æˆ·è®¾ç½®é—´éš”æ—¶é—´
    }
    
    // å»¶è¿Ÿå¯åŠ¨ï¼Œç¡®ä¿æç¤ºè¯­æœ—è¯»å®Œæˆ
    setTimeout(nextWord, 8000); // æç¤ºè¯­çº¦éœ€8ç§’
}

function stopDictation() {
    isStopped = true;
    clearTimeout(timer);
    document.getElementById('status').textContent = "å¬å†™å·²åœæ­¢";
    document.getElementById('stopBtn').style.display = 'none';
    document.getElementById('remainingWords').textContent = `å‰©ä½™ï¼š0`;
    speak("å¬å†™å·²åœæ­¢ï¼Œä¸‹æ¬¡å†è§ï¼", 0.8);
}

function speak(text, rate) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'zh-CN';
    utterance.pitch = 1.2;
    utterance.rate = rate;
    window.speechSynthesis.speak(utterance);
}
</script>
</body>
</html>